{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/v1/workflows":{"get":{"tags":["V1"],"summary":"Get Workflows Public","operationId":"get_workflows_public","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"order_by","in":"query","required":false,"schema":{"type":"string","default":"last_updated_at","title":"Order By"}},{"name":"sort","in":"query","required":false,"schema":{"type":"string","default":"desc","title":"Sort"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Page size","default":50,"title":"Size"},"description":"Page size"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Page_WorkflowWithTriggers_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/workflows/{workflow_id}":{"get":{"tags":["V1"],"summary":"Get Workflow Public","operationId":"get_workflow_public","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"workflow_id","in":"path","required":true,"schema":{"type":"string","title":"Workflow Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkflowWithTriggers"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/workflows/{workflow_id}/run":{"post":{"tags":["V1"],"summary":"Create Run With Api Key","operationId":"create_run_with_api_key","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"workflow_id","in":"path","required":true,"schema":{"type":"string","title":"Workflow Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRunRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimplifiedRun"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["V1"],"summary":"Get Runs Public","operationId":"get_runs_public","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"workflow_id","in":"path","required":true,"schema":{"type":"string","title":"Workflow Id"}},{"name":"order_by","in":"query","required":false,"schema":{"type":"string","default":"created_at","title":"Order By"}},{"name":"sort","in":"query","required":false,"schema":{"type":"string","default":"desc","title":"Sort"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SimplifiedRun"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/workflows/{workflow_id}/run/{run_id}":{"get":{"tags":["V1"],"summary":"Api Key Get Run","operationId":"api_key_get_run","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"workflow_id","in":"path","required":true,"schema":{"type":"string","title":"Workflow Id"}},{"name":"run_id","in":"path","required":true,"schema":{"type":"string","title":"Run Id"}},{"name":"output_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Output Only"}},{"name":"use_output_ids","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Use Output Ids"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/SimplifiedRun"},{"$ref":"#/components/schemas/RunOutputWithStatus"}],"title":"Response Api Key Get Run"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/workflows/{workflow_id}/run/sync":{"post":{"tags":["V1"],"summary":"Create Sync Run","operationId":"create_sync_run","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"workflow_id","in":"path","required":true,"schema":{"type":"string","title":"Workflow Id"}},{"name":"output_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Output Only"}},{"name":"use_output_ids","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Use Output Ids"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRunRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"anyOf":[{"$ref":"#/components/schemas/RunOutput"},{"$ref":"#/components/schemas/SimplifiedRun"}],"title":"Response Create Sync Run"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/knowledge-bases":{"post":{"tags":["V1"],"summary":"Public Add Knowledge Base","operationId":"public_add_knowledge_base","security":[{"APIKeyHeader":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateKnowledgeBase"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseV2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["V1"],"summary":"Public Get Knowledge Bases","operationId":"public_get_knowledge_bases","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"query","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Query"}},{"name":"order_by","in":"query","required":false,"schema":{"type":"string","default":"last_updated_at","title":"Order By"}},{"name":"sort","in":"query","required":false,"schema":{"type":"string","default":"desc","title":"Sort"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Page size","default":50,"title":"Size"},"description":"Page size"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Page_KnowledgeBaseV2_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/knowledge-bases/{knowledge_base_id}":{"get":{"tags":["V1"],"summary":"Public Get Knowledge Base","operationId":"public_get_knowledge_base","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"knowledge_base_id","in":"path","required":true,"schema":{"type":"string","title":"Knowledge Base Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseV2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["V1"],"summary":"Public Update Knowledge Base","operationId":"public_update_knowledge_base","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"knowledge_base_id","in":"path","required":true,"schema":{"type":"string","title":"Knowledge Base Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateKnowledgeBase"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseV2"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["V1"],"summary":"Delete Knowledge Base V2","operationId":"delete_knowledge_base_v2","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"knowledge_base_id","in":"path","required":true,"schema":{"type":"string","title":"Knowledge Base Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Status"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/knowledge-bases/{knowledge_base_id}/document":{"post":{"tags":["V1"],"summary":"Add Knowledge Base Document","operationId":"add_knowledge_base_document","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"knowledge_base_id","in":"path","required":true,"schema":{"type":"string","title":"Knowledge Base Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateDocument"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseDocument"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/knowledge-bases/{knowledge_base_id}/document/{document_id}":{"get":{"tags":["V1"],"summary":"Get Knowledge Base Document","operationId":"get_knowledge_base_document","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"knowledge_base_id","in":"path","required":true,"schema":{"type":"string","title":"Knowledge Base Id"}},{"name":"document_id","in":"path","required":true,"schema":{"type":"string","title":"Document Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KnowledgeBaseDocument"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/knowledge-bases/{knowledge_base_id}/documents/{status}":{"get":{"tags":["V1"],"summary":"Get Knowledge Base Documents","operationId":"get_knowledge_base_documents","security":[{"APIKeyHeader":[]}],"parameters":[{"name":"knowledge_base_id","in":"path","required":true,"schema":{"type":"string","title":"Knowledge Base Id"}},{"name":"status","in":"path","required":true,"schema":{"type":"string","title":"Status"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Page size","default":50,"title":"Size"},"description":"Page size"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Page_KnowledgeBaseDocument_"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"CreateDocument":{"properties":{"status":{"$ref":"#/components/schemas/DocumentStatus"},"prefix":{"type":"string","title":"Prefix","default":"/"},"name":{"type":"string","title":"Name"},"doc_metadata":{"type":"object","title":"Doc Metadata","default":{}}},"type":"object","required":["status","name"],"title":"CreateDocument"},"CreateKnowledgeBase":{"properties":{"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"document_types":{"items":{"type":"string"},"type":"array","title":"Document Types","default":[]},"status":{"allOf":[{"$ref":"#/components/schemas/TrainStatus"}],"default":"created"},"kb_type":{"allOf":[{"$ref":"#/components/schemas/KBType"}],"default":"temporary"},"workflow_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Workflow Id"},"node_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Node Id"}},"type":"object","required":["name","description"],"title":"CreateKnowledgeBase"},"CreateRunRequest":{"properties":{"input":{"type":"object","title":"Input"},"node_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Node Ids"},"group_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Group Id"}},"type":"object","required":["input"],"title":"CreateRunRequest"},"DocumentStatus":{"type":"string","enum":["trained","training","error","uploaded","folder"],"title":"DocumentStatus"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"KBType":{"type":"string","enum":["temporary","entity"],"title":"KBType"},"KnowledgeBaseDocument":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Summary"},"short_summary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Short Summary"},"doc_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Doc Type"},"source_type":{"anyOf":[{"$ref":"#/components/schemas/SourceType"},{"type":"null"}]},"source_metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Source Metadata"},"content_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content Type"},"has_conversion":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Has Conversion"},"status":{"$ref":"#/components/schemas/DocumentStatus"},"doc_metadata":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Doc Metadata"},"error":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Error"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"prefix":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prefix"},"uri":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Uri"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"size":{"type":"integer","title":"Size"}},"type":"object","required":["id","summary","status","error","updated_at","created_at","size"],"title":"KnowledgeBaseDocument"},"KnowledgeBaseV2":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"group_id":{"type":"string","format":"uuid","title":"Group Id"},"name":{"type":"string","title":"Name"},"status":{"$ref":"#/components/schemas/TrainStatus"},"description":{"type":"string","title":"Description"},"document_types":{"items":{"type":"string"},"type":"array","title":"Document Types"},"kb_type":{"$ref":"#/components/schemas/KBType"},"size":{"type":"number","title":"Size"},"num_docs":{"type":"integer","title":"Num Docs"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"error":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Error"},"total_documents":{"type":"integer","title":"Total Documents"},"training_documents":{"type":"integer","title":"Training Documents"},"trained_documents":{"type":"integer","title":"Trained Documents"},"error_documents":{"type":"integer","title":"Error Documents"},"uploaded_documents":{"type":"integer","title":"Uploaded Documents"},"source_types":{"additionalProperties":{"type":"integer"},"type":"object","title":"Source Types"},"training_source_types":{"items":{"$ref":"#/components/schemas/SourceType"},"type":"array","title":"Training Source Types"},"documents":{"items":{"$ref":"#/components/schemas/KnowledgeBaseDocument"},"type":"array","title":"Documents","default":[]}},"type":"object","required":["id","group_id","name","status","description","document_types","kb_type","size","num_docs","created_at","updated_at","error","total_documents","training_documents","trained_documents","error_documents","uploaded_documents","source_types","training_source_types"],"title":"KnowledgeBaseV2"},"Page_KnowledgeBaseDocument_":{"properties":{"items":{"items":{"$ref":"#/components/schemas/KnowledgeBaseDocument"},"type":"array","title":"Items"},"total":{"type":"integer","minimum":0.0,"title":"Total"},"page":{"type":"integer","minimum":1.0,"title":"Page"},"size":{"type":"integer","minimum":1.0,"title":"Size"},"pages":{"type":"integer","minimum":0.0,"title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"Page[KnowledgeBaseDocument]"},"Page_KnowledgeBaseV2_":{"properties":{"items":{"items":{"$ref":"#/components/schemas/KnowledgeBaseV2"},"type":"array","title":"Items"},"total":{"type":"integer","minimum":0.0,"title":"Total"},"page":{"type":"integer","minimum":1.0,"title":"Page"},"size":{"type":"integer","minimum":1.0,"title":"Size"},"pages":{"type":"integer","minimum":0.0,"title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"Page[KnowledgeBaseV2]"},"Page_WorkflowWithTriggers_":{"properties":{"items":{"items":{"$ref":"#/components/schemas/WorkflowWithTriggers"},"type":"array","title":"Items"},"total":{"type":"integer","minimum":0.0,"title":"Total"},"page":{"type":"integer","minimum":1.0,"title":"Page"},"size":{"type":"integer","minimum":1.0,"title":"Size"},"pages":{"type":"integer","minimum":0.0,"title":"Pages"}},"type":"object","required":["items","total","page","size","pages"],"title":"Page[WorkflowWithTriggers]"},"RunOutput":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"output":{"type":"object","title":"Output"}},"type":"object","required":["id","output"],"title":"RunOutput"},"RunOutputWithStatus":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"output":{"type":"object","title":"Output"},"status":{"anyOf":[{"$ref":"#/components/schemas/RunStatus"},{"type":"string"}],"title":"Status"}},"type":"object","required":["id","output","status"],"title":"RunOutputWithStatus"},"RunStatus":{"type":"string","enum":["queued","running","failed","completed","stopped"],"title":"RunStatus"},"SimplifiedRun":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"group_id":{"type":"string","format":"uuid","title":"Group Id"},"workflow_id":{"type":"string","format":"uuid","title":"Workflow Id"},"input":{"type":"object","title":"Input"},"output":{"type":"object","title":"Output"},"node_ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Node Ids"},"status":{"$ref":"#/components/schemas/RunStatus"},"progress":{"type":"integer","title":"Progress","default":0},"created_at":{"type":"string","format":"date-time","title":"Created At"},"finished_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Finished At"}},"type":"object","required":["id","group_id","workflow_id","input","output","status","created_at"],"title":"SimplifiedRun"},"SourceType":{"type":"string","enum":["Document","Google Drive","Notion","Website","OneDrive","Slack","Linear","Github","Teams","Sharepoint"],"title":"SourceType"},"Status":{"properties":{"success":{"type":"boolean","title":"Success"}},"type":"object","required":["success"],"title":"Status"},"TrainStatus":{"type":"string","enum":["created","trained","training","error"],"title":"TrainStatus"},"Trigger":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"group_id":{"type":"string","format":"uuid","title":"Group Id"},"workflow_id":{"type":"string","format":"uuid","title":"Workflow Id"},"definition":{"type":"object","title":"Definition"},"routing_key":{"type":"string","title":"Routing Key"}},"type":"object","required":["id","group_id","workflow_id","definition","routing_key"],"title":"Trigger"},"UpdateKnowledgeBase":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"status":{"anyOf":[{"$ref":"#/components/schemas/TrainStatus"},{"type":"null"}]},"document_types":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Document Types"},"kb_type":{"anyOf":[{"$ref":"#/components/schemas/KBType"},{"type":"null"}]},"error":{"anyOf":[{"type":"object"},{"type":"null"}],"title":"Error"}},"type":"object","title":"UpdateKnowledgeBase"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"WorkflowType":{"type":"string","enum":["flow","handler"],"title":"WorkflowType"},"WorkflowWithTriggers":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"group_id":{"type":"string","format":"uuid","title":"Group Id"},"name":{"type":"string","title":"Name"},"type":{"$ref":"#/components/schemas/WorkflowType"},"definition":{"type":"object","title":"Definition"},"last_updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Updated At"},"last_run_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Run At"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"deleted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Deleted At"},"runs_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Runs Count"},"author_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"saved":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Saved"},"error_handler":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Error Handler"},"triggers":{"items":{"$ref":"#/components/schemas/Trigger"},"type":"array","title":"Triggers","default":[]}},"type":"object","required":["id","group_id","name","type","definition"],"title":"WorkflowWithTriggers"}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"X-API-Key"}}}}
